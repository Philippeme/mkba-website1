<div class="admin-sidebar" id="adminSidebar">
    <div class="sidebar-header">
        <div class="logo-frame">
            <img src="{{ asset('images/logo/logo-mkba.png') }}" alt="MK BA Logo">
        </div>
        <!-- Switch Toggle -->
        <div class="sidebar-switch">
            <button class="switch-button active" id="sidebarSwitchBtn">
                        <span class="switch-slider">
                            <span class="switch-knob"></span>
                        </span>
            </button>
        </div>
    </div>

    <ul class="sidebar-nav">
        <!-- ANALYTICS SECTION -->
        <li class="nav-section">
            <div class="nav-section-title">Analytics</div>
        </li>

        <li class="nav-item">
            <a href="{{ path('admin_dashboard') }}" class="nav-link {{ app.request.get('_route') starts with 'admin_dashboard' ? 'active' : '' }}">
                <i class="bi-speedometer2"></i>
                <span class="nav-text">Dashboard</span>
                <div class="tooltip">Dashboard</div>
            </a>
        </li>

        <!-- SERVICE MANAGEMENT SECTION -->
        <li class="nav-section">
            <div class="nav-section-title">Gestion des Services</div>
        </li>

        <!-- PROJETS -->
        <li class="nav-item dropdown {{ app.request.get('_route') starts with 'admin_project' ? 'has-active-child' : '' }}">
            <a href="#" class="nav-link dropdown-toggle-custom {{ app.request.get('_route') starts with 'admin_project' ? 'active' : '' }}" data-dropdown="projects">
                <i class="bi-folder"></i>
                <span class="nav-text">Projets</span>
                {# Badge dynamique basé sur le nombre réel de projets #}
                {% if sidebar_project_count is defined and sidebar_project_count > 0 %}
                    <span class="nav-badge">{{ sidebar_project_count }}</span>
                {% endif %}
                <i class="bi-chevron-down nav-arrow"></i>
                <div class="tooltip">Gestion des Projets</div>
            </a>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{{ path('admin_project_new') }}"><i class="bi-plus-circle me-2"></i>Nouveau Projet</a></li>
                <li><a class="dropdown-item" href="{{ path('admin_project_index') }}"><i class="bi-list-ul me-2"></i>Tous les Projets</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi-clock me-2"></i>Projets actifs</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi-archive me-2"></i>Projets archivés</a></li>
            </ul>
        </li>

        <li class="nav-item dropdown {{ app.request.get('_route') starts with 'admin_document' ? 'has-active-child' : '' }}">
            <a href="#" class="nav-link dropdown-toggle-custom {{ app.request.get('_route') starts with 'admin_document' ? 'active' : '' }}" data-dropdown="documents">
                <i class="bi-file-earmark"></i>
                <span class="nav-text">Documents</span>
                <i class="bi-chevron-down nav-arrow"></i>
                <div class="tooltip">Gestion des Documents</div>
            </a>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{{ path('admin_document_new') }}"><i class="bi-plus-circle me-2"></i>Nouveau Document</a></li>
                <li><a class="dropdown-item" href="{{ path('admin_document_index') }}"><i class="bi-list-ul me-2"></i>Tous les Documents</a></li>
            </ul>
        </li>

        <!-- USER & ENTITY MANAGEMENT SECTION -->
        <li class="nav-section">
            <div class="nav-section-title">Gestion Utilisateurs & Entités</div>
        </li>

        <li class="nav-item dropdown {{ app.request.get('_route') starts with 'admin_user' ? 'has-active-child' : '' }}">
            <a href="#" class="nav-link dropdown-toggle-custom {{ app.request.get('_route') starts with 'admin_user' ? 'active' : '' }}" data-dropdown="users">
                <i class="bi-people"></i>
                <span class="nav-text">Utilisateurs</span>
                <i class="bi-chevron-down nav-arrow"></i>
                <div class="tooltip">Gestion des Utilisateurs</div>
            </a>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#"><i class="bi-person-plus me-2"></i>Nouvel Utilisateur</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi-people me-2"></i>Tous les Utilisateurs</a></li>
            </ul>
        </li>

        <li class="nav-item dropdown {{ app.request.get('_route') starts with 'admin_role' ? 'has-active-child' : '' }}">
            <a href="#" class="nav-link dropdown-toggle-custom {{ app.request.get('_route') starts with 'admin_role' ? 'active' : '' }}" data-dropdown="roles">
                <i class="bi-shield-check"></i>
                <span class="nav-text">Rôles & Permissions</span>
                <i class="bi-chevron-down nav-arrow"></i>
                <div class="tooltip">Rôles & Permissions</div>
            </a>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#"><i class="bi-plus-circle me-2"></i>Nouveau Rôle</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi-shield-check me-2"></i>Tous les Rôles</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi-key me-2"></i>Permissions</a></li>
            </ul>
        </li>

        <!-- SYSTEM SECTION -->
        <li class="nav-section">
            <div class="nav-section-title">Système</div>
        </li>

        <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle-custom" data-dropdown="system">
                <i class="bi-gear"></i>
                <span class="nav-text">Configuration</span>
                <i class="bi-chevron-down nav-arrow"></i>
                <div class="tooltip">Configuration Système</div>
            </a>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item {{ app.request.get('_route') == 'admin_settings_index' ? 'active' : '' }}" href="{{ path('admin_settings_index') }}"><i class="bi-sliders2 me-2"></i>Paramètres</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi-database me-2"></i>Données de Référence</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi-clock-history me-2"></i>Journaux</a></li>
            </ul>
        </li>
    </ul>
</div>
